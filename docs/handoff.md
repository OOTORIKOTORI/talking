# ハンドオフ手順

複数のチャットセッションにまたがる開発で、作業内容を引き継ぐための手順です。

---

## なぜハンドオフが必要か

- AI チャットはセッションが変わるとコンテキストがリセットされる
- 過去の決定事項・未完了タスク・既知の問題を明示的に引き継ぐ必要がある
- テンプレートを使うことで、引き継ぎ漏れを防ぐ

---

## ハンドオフのタイミング

- チャットを終える前
- 大きなタスクを区切ったとき
- 別の人に作業を引き継ぐとき
- 数日間開発を中断するとき

---

## ハンドオフの手順

### 1. 作業内容を整理

現在のセッションで何をしたか、何が残っているかをまとめます。

### 2. テンプレートをコピー

[ハンドオフテンプレート](./templates/HANDOFF_CONTEXT_TEMPLATE.md) をコピーして、次のチャットに貼り付けます。

### 3. 各セクションを埋める

| セクション         | 内容                                                      |
|--------------------|-----------------------------------------------------------|
| 今日のゴール       | このセッションで達成したいこと                            |
| 現在の状態         | 画面のスクリーンショット or 動作状況                      |
| 直近の変更         | 編集したファイル・追加した機能                            |
| 既知の問題         | 未解決のバグ・警告                                        |
| 次の一手           | 次にやるべきこと (優先順位付き)                           |
| 参考リンク         | PR, Issue, CI, スクリーンショットの URL                   |

### 4. ADR を更新 (重要な決定があった場合)

[ADR](./adr/README.md) に設計判断を記録してください。

### 5. 次のチャットでテンプレートを貼る

新しいチャットで、埋めたテンプレートをそのまま貼り付けてください。

---

## テンプレートの場所

- [HANDOFF_CONTEXT_TEMPLATE.md](./templates/HANDOFF_CONTEXT_TEMPLATE.md)

---

## 例: ハンドオフの実際の使い方

### セッション A (終了時)

```markdown
## 今日のゴール
- 公開ギャラリー画面にタグフィルタを追加

## 現在の状態
- タグ選択 UI は実装完了
- API 側のタグフィルタは未実装

## 直近の変更
- `apps/frontend/pages/assets/index.vue`: タグ選択 UI 追加
- `apps/api/src/assets/dto/query-assets.dto.ts`: tags フィールド追加 (未実装)

## 既知の問題
- tags でフィルタしても全件返ってくる

## 次の一手
1. API 側で tags クエリを Prisma に反映
2. Frontend でタグフィルタ動作確認

## 参考リンク
- PR: https://github.com/org/repo/pull/123
```

### セッション B (開始時)

上記のテンプレートをそのまま貼って、次のように指示します:

```markdown
前回の続きです。API 側のタグフィルタを実装してください。

(上記のハンドオフテンプレートを貼る)
```

---

## ベストプラクティス

- **スクリーンショットを撮る**: 画面の状態を視覚化
- **ファイルパスを明記**: 変更箇所が一目でわかる
- **優先順位をつける**: 次の一手は具体的に
- **ADR を活用**: 「なぜこの設計にしたか」を残す

---

## 関連ドキュメント

- [プロンプトテンプレート](./prompts/README.md): タスク指示の書き方
- [ADR](./adr/README.md): 設計判断の記録
- [ワークフロー](./workflow.md): ブランチ・コミット規約
