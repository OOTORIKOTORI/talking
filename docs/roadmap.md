# ロードマップ

プロジェクトの開発計画です。MVP → β → 正式リリースまでの流れを記載しています。

---

## MVP(完了)
- 画像/音声アセットの投稿・公開ギャラリー表示
- 署名GETによるサムネ安定化(TTL切れ時の再取得)
- キャラクター作成/編集(立ち絵複数、感情/パターン/ラベル/並び順、拡大プレビュー、ドラッグ並べ替え)
- お気に入り(アセット/キャラクター)登録・解除・一覧
- 公開ギャラリー/管理/アップロード/お気に入りでの**タブ統合**

## β(これから)
- サムネ最適化(AVIF/WebP/品質自動選択)、IOでの事前フェッチと可視復帰時の軽量リフレッシュ
- サーバ側フィルタ統一(Meili facets: `contentType/primaryTag/tags/q/sort`)— お気に入りも同スキーマ
- E2E/ユニット(♡トグル、署名GET再取得、編集/削除ガード、アップロード一連)
- 削除UX(Undo/Trash → バッチ実削除)
- 将来: 会話辞書とキャラクターの連動(感情→表情画像の自動選択)

---

## フェーズ 1: MVP (最小限の動作確認)

### ✅ 完了済み

- [x] Monorepo 構成 (pnpm workspace)
- [x] Docker Compose でローカル環境構築
- [x] NestJS API (CRUD 基本)
- [x] Prisma ORM + PostgreSQL
- [x] MinIO (S3 互換) で署名付き URL アップロード
- [x] Nuxt 3 フロントエンド (一覧・詳細・アップロード)
- [x] BullMQ + Redis でジョブキュー
- [x] Meilisearch で全文検索
- [x] アセットに description, tags を追加
- [x] 検索画面でキーワード検索
- [x] **認証導入（Supabase Auth / HS256 JWT 検証）**
- [x] **公開ギャラリー/アセット管理の分離**
- [x] **一覧でのサムネ表示（期限切れ自動復旧）**

### 🚧 進行中

- [ ] タグ UI (選択・フィルタ)
- [ ] 検索結果のハイライト表示
- [ ] アップロード進捗表示

### 📋 TODO (近日中)

- [ ] ページネーション (一覧画面)
- [ ] お気に入り機能
- [ ] コメント機能

### ⏭️ 次のステップ

- お気に入りのフィルタ状態をURLに同期（再訪復元・共有）
- IntersectionObserver でサムネの事前フェッチ

## フェーズ 2: β版 (機能拡充)

### 会話管理

- [ ] 会話シーン作成・編集
- [ ] シーン内のセリフ追加・並び替え
- [ ] アセットとシーンの紐付け

### VN (ビジュアルノベル) ビルダー最小版

- [ ] シーン再生プレビュー
- [ ] キャラクター立ち絵表示
- [ ] 背景画像切り替え
- [ ] テキストボックス表示

### 検索強化

- [ ] ファセット検索 (タグ・カテゴリ)
- [ ] ソート機能 (日付・名前・人気)
- [ ] 検索履歴

### UI/UX

- [ ] ダークモード
- [ ] レスポンシブ対応 (モバイル)
- [ ] アクセシビリティ対応 (ARIA)

---

## フェーズ 3: 正式リリース

### 本番環境

- [ ] CI/CD パイプライン (GitHub Actions)
- [ ] クラウドデプロイ (AWS / GCP / Azure)
- [ ] CDN 設定 (CloudFront / Cloudflare)
- [ ] バックアップ自動化

### セキュリティ

- [ ] OAuth 2.0 ログイン (Google / GitHub)
- [ ] ロールベースアクセス制御 (RBAC)
- [ ] 監査ログ

### パフォーマンス

- [ ] 画像最適化 (WebP, lazy loading)
- [ ] キャッシュ戦略 (Redis)
- [ ] DB クエリ最適化

### 運用

- [ ] エラー監視 (Sentry)
- [ ] ログ集約 (CloudWatch / Datadog)
- [ ] アラート設定

---

## 将来的な構想

- [ ] プラグインシステム (サードパーティ拡張)
- [ ] 多言語対応 (i18n)
- [ ] AI 音声合成 (TTS)
- [ ] AI 画像生成連携 (Stable Diffusion)
- [ ] WebSocket でリアルタイム更新

---

## 優先順位の決め方

1. **MVP 必須機能**: ユーザーが最低限使える状態
2. **ユーザー価値**: 利用者にとっての価値が高い
3. **技術的リスク**: 早めに検証すべき不確実性が高いもの
4. **依存関係**: 他の機能のベースになるもの

---

## 関連ドキュメント

- [アーキテクチャ](./architecture.md): システム構成
- [ワークフロー](./workflow.md): 開発の進め方
- [ADR](./adr/README.md): 設計判断の記録
